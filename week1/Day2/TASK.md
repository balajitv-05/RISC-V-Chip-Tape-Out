{"canmore.create_textdoc": {"name": "day2_synthesis_notes", "type": "document", "content": "# Day 2: Hierarchical vs Flat Synthesis and Efficient Flop Coding Styles\n\n## Hierarchical Design\nA Hierarchical Design contains multiple sub-modules instantiated in the top module.\n\n- Used for large designs (divide and conquer approach).\n- Allows better utilization of tool resources for optimizing smaller blocks.\n- Improves compute resource utilization, runtime, and debugging.\n\n## Flat Design\nA Flat Design is when all hierarchical module structures are collapsed into a single level, integrating submodules directly into the top-level module.\n\n- Preferable for small and simple ASICs.\n- Efficient optimization for small designs within a reasonable runtime.\n- Hierarchical approach is preferable for large and complex ASICs.\n\n## Design of Multiple Modules\nHierarchical Flow:\nbash\nyosys\nread_liberty -lib ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nread_verilog multiple_modules.v\nsynth -top multiple_modules\nabc -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nwrite_verilog -noattr multiple_modules.v\n\n- Preserves hierarchy.\n- Top Module: multiple_modules \n- Sub Modules: sub_module1, sub_module2\n\nFlattened Flow:\nbash\nflatten\nwrite_verilog -noattr multiple_modules_flat.v\n\n\n---\n\n## D Flip-Flops\n\n### D Flip-Flop with Asynchronous Reset\n- Captures d on rising edge of clk unless async reset is active.\n- Async reset has higher priority; if high, q = 0 immediately.\n\n### D Flip-Flop with Asynchronous Set\n- Captures d on rising edge of clk unless async set is active.\n- If async set is high, q = 1 immediately, regardless of clk.\n\n### D Flip-Flop with Synchronous Reset\n- Captures d on rising edge of clk.\n- If sync reset is high at the clock edge, then q = 0.\n\n---\n\n## Synthesis Examples\n\n### Synthesis of DFF with Async Set\nbash\nyosys\nread_liberty -lib ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nread_verilog dff_async_set.v\nsynth -top dff_async_set\ndfflibmap -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nabc -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nshow\n\n\n### Synthesis of DFF with Async Reset\nbash\nyosys\nread_liberty -lib ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nread_verilog dff_async_reset.v\nsynth -top dff_async_reset\ndfflibmap -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nabc -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nshow\n\n\n### Synthesis of DFF with Sync Reset\nbash\nyosys\nread_liberty -lib ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nread_verilog dff_sync_reset.v\nsynth -top dff_sync_reset\ndfflibmap -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nabc -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nshow\n\n\nNotes:\n- abc -liberty <.lib file> â†’ technology mapping.\n- synth -top <module_name> â†’ synthesis of top module.\n- dfflibmap -liberty <.lib file> â†’ maps internal flip-flops to library cells.\n\n---\n\n## Optimizations\nOptimization simplifies RTL logic to make the design more efficient.\n\n### Part 1 â€“ Synthesis of MULT2\nbash\nyosys\nread_liberty -lib ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nread_verilog mult_2.v\nsynth -top mult_2\nabc -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nwrite_verilog -noattr mult_2_net.v\n\n\n### Part 2 â€“ Synthesis of MULT8\nbash\nyosys\nread_liberty -lib ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nread_verilog mult_8.v\nsynth -top mult_8\nabc -liberty ~/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib\nwrite_verilog -noattr mult_8_net.v\n\n\n---\n\nðŸ“Œ This concludes the Day 2 notes on Hierarchical vs Flat Synthesis, Flip-Flop Coding Styles, and Optimization.\n"}}
