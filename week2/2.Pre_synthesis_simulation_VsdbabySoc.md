## VSDBabySoC: A Simple RISC-V System-on-Chip Overview and Simulation Guide

The **VSDBabySoC** is a straightforward System-on-Chip (SoC) design that integrates three primary Intellectual Property (IP) cores: a **RISC-V processor** (**rvmyth**), a **Phase-Locked Loop** (**pll**), and a **Digital-to-Analog Converter** (**dac**). The project demonstrates the successful integration of these cores and outlines procedures for both pre-synthesis and post-synthesis verification through simulation.

-----

### ðŸ“¦ Project Structure

The design files are organized into a logical directory structure:

| Directory | Content | Description |
| :--- | :--- | :--- |
| `VSDBabySoC/` | Root directory. | |
| `â”œâ”€â”€ src/` | Source files. | |
| `â”‚   â”œâ”€â”€ include/` | Header files (`*.vh`). | Contains macros and parameter definitions (e.g., `sandpiper.vh`). |
| `â”‚   â””â”€â”€ module/` | Verilog source files. | Contains the core module implementations. |
| `â””â”€â”€ output/` | Generated files. | Stores simulation outputs and compiled artifacts. |
| `     â””â”€â”€ compiled_tlv/ ` | Intermediate compiled files (if applicable). | |

-----

### ðŸ’» Module Descriptions

The SoC is built around four key Verilog modules:

#### 1\. `vsdbabysoc.v` (Top-Level SoC)

This module acts as the **integrator** for the entire system. It connects the processor, PLL, and DAC, managing the system-level inputs and outputs.

| Signal | Direction | Description | Connection |
| :--- | :--- | :--- | :--- |
| `reset` | Input | Resets the RISC-V core. | |
| `VCO_IN, ENb_CP, ENb_VCO, REF` | Input | PLL control and reference signals. | |
| `VREFH` | Input | DAC reference voltage. | |
| **`OUT`** | **Output** | **Analog output from the DAC.** | |
| `RV_TO_DAC` | Internal | **10-bit** bus connecting `rvmyth` output to `avsddac` input. | |
| `CLK` | Internal | Clock signal generated by the PLL. | Connects PLL output to RISC-V core. |

#### 2\. `rvmyth.v` (RISC-V Core)

A simple RISC-V based processor responsible for digital data processing.

| Signal | Direction | Description |
| :--- | :--- | :--- |
| `clk` | Input | Clock signal (from PLL). |
| `reset` | Input | Processor reset/initialization. |
| **`out`** | **Output** | **10-bit digital signal** (output data to DAC). |

Note: 
   1.For rvmyth.v we need to clone another git [rvmyth](https://github.com/kunalg123/rvmyth/)
   2.After cloning there are files like mythcore_test.v and tb_mythcore_test.v these are the files the original verilog rvmyth file.
   3.And change the module name as rvmyth (or) clone this repository for the pre-synthesis simulation.
   4.After cloning this repository change the directory to the files and run the commands.
#### 3\. `avsdpll.v` (PLL Module)

The Phase-Locked Loop is crucial for generating a stable, synchronized clock signal for the digital logic.

| Signal | Direction | Description |
| :--- | :--- | :--- |
| `VCO_IN, ENb_CP, ENb_VCO, REF` | Input | Control and reference signals. |
| **`CLK`** | **Output** | **Stable clock signal** for the core and other modules. |

#### 4\. `avsddac.v` (DAC Module)

This module performs the final conversion step, transforming the processor's digital output into a continuous analog signal.

| Signal | Direction | Description |
| :--- | :--- | :--- |
| `D` | Input | **10-bit digital input** (from `rvmyth`). |
| `VREFH` | Input | Reference voltage for conversion. |
| **`OUT`** | **Output** | **Analog output signal.** |

-----

### ðŸ§ª Simulation Guide

Simulation is performed using **Icarus Verilog** (`iverilog`) for compilation and **GTKWave** for waveform viewing.

#### Pre-Synthesis Simulation

The pre-synthesis simulation verifies the design's functional behavior using the initial Verilog source code, **before** logic synthesis optimization and mapping to target technology.

| Step | Action | Description |
| :--- | :--- | :--- |
| **1. Compile and Elaborate** | Run the command below: | Compiles the testbench and the SoC modules, creating an executable simulation file (`pre_synth_sim.out`). |
| **2. Execute Simulation** | `./PRE_SYNTH_SIM/pre_synth_sim.out` | Runs the simulation, generating the **`pre_synth_sim.vcd`** waveform dump file. |

**Compilation Command:**

```bash
iverilog -o PRE_SYNTH_SIM sp_verilog.vh sandpiper_gen.vh vsdbabysoc.v testbench.v
./PRE_SYNTH_SIM
```

  * **`-o PRE_SYNTH_SIM`**: Specifies the output path and name for the compiled executable.
  * **`sp_verilog.vh sandpiper_gen.vh vsdbabysoc.v testbench.v`**: Specifies include files for header and verilog modules.

#### Viewing Waveform

After the simulation is complete, the generated VCD (Value Change Dump) file can be opened with GTKWave:

```bash
gtkwave pre_synth_sim.vcd 
```
[!Alt Text](https://github.com/balajitv-05/RISC-V-Chip-Tape-Out/blob/a20bb285b5b9e60d462f42bc3218ef41d537e02f/week2/images/pre_synth_2.png)
This file will contain the time-domain behavior of all signals dumped by the `testbench.v`, allowing verification of the RISC-V operation, PLL clock generation, and DAC output transitions.
[!Alt Text](https://github.com/balajitv-05/RISC-V-Chip-Tape-Out/blob/a20bb285b5b9e60d462f42bc3218ef41d537e02f/week2/images/pre_synth_3.png)
